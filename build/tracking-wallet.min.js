/*! tracking-wallet - v1.4.7 - 2016-03-02 */"use strict";!function(a){var b=function(a){this.levelLogger=a};b.prototype.debug=function(b){this.levelLogger>=3&&a&&a.console&&a.console.debug&&a.console.debug(b)},b.prototype.info=function(b){this.levelLogger>=2&&a&&a.console&&a.console.info&&a.console.info(b)},b.prototype.warn=function(b){this.levelLogger>=1&&a&&a.console&&a.console.warn&&a.console.warn(b)},b.prototype.error=function(b){this.levelLogger>=0&&a&&a.console&&a.console.error&&a.console.error(b)};var c=function(){};c.getId=function(){function a(){return Math.random().toString(16).slice(-4)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};var d=function(){};d.getMixpanelCookie=function(){if(document.cookie.length>0){var a=document.cookie.match(/mp_\w*_mixpanel/g);if(a&&a.length>0){var b=d.get(a[0]);return JSON.parse(b)}}return null},d.get=function(b){if(document.cookie.length>0){var c=document.cookie.indexOf(b+"=");if(-1!==c){c=c+b.length+1;var d=document.cookie.indexOf(";",c);return-1===d&&(d=document.cookie.length),a.unescape(document.cookie.substring(c,d))}}return null},d.set=function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"};var e={prefixNameTrakingData:"data-tw-",nameTrackingEventData:"data-tw-event",prefixNameTrackingOwnerDomain:"tw-owner-domain",preTextLogger:"TR-W",pageViewEvent:"Page view",clickEvent:"click",submitEvent:"submit",defaultTimeout:300,cookieFirst:"CW-FirstTime",sendPageView:"send-page-view"},f={},g=null,h={},i=function(a){if(a!==e.prefixNameTrakingData+"event"){var b=a.replace(e.prefixNameTrakingData,"");return b=b.replace("-"," "),j(b)}return a.replace(e.prefixNameTrakingData,"")},j=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},k=function(a){var b,c,d=a[0].attributes,f=null,g={};for(c=0,b=d.length;b>c;c++)f=d[c],0===f.name.indexOf(e.prefixNameTrakingData)&&(g[i(f.name)]=f.value);return g},l=function(a,b){a[0].click(),setTimeout(function(){a.on("click",b)},200)},m=function(a){if(a.attr("id"))return a.attr("id");var b=c.getId();return a.attr("id","tw-"+b),"tw-"+b},n=function(b,c){if("a"===b.prop("tagName").toLowerCase())a.mixpanel.track_links("#"+m(b),j(e.clickEvent),c),g.debug("Bind event click in "+m(b));else{var d=function(f){f.preventDefault(),b.unbind("click",d),setTimeout(function(){l(b,d)},e.defaultTimeout),a.mixpanel.track(j(e.clickEvent),c)};b.on("click",d)}},o=function(b){var c={};return a.$.each(b.find("input, select"),function(b,d){a.$(d).data("tw-name")&&(c[a.$(d).data("tw-name")]=a.$(d).val())}),c},p=function(b,c){"form"===b.prop("tagName").toLowerCase()?a.mixpanel.track_forms("#"+m(b),j(e.submitEvent),function(){var d=o(b);return a.$.extend({},c,d)}):console.error("submit event if only allowed in form tags")},q=function(b){var c=k(b);if(c=a.$.extend({},f,c),c.event){var d=c.event;switch(delete c.event,d){case e.clickEvent:n(b,c);break;case e.submitEvent:p(b,c);break;default:console.warn("Event not found! ("+d+")")}}else g.error("Element has not defined event attribute")},r=function(){var b,c=null,d=a.$("["+e.nameTrackingEventData+"]");if(d&&d.length>0)for(b=d.length,c=0;b>c;c++)q(a.$(d[c]))},s=function(){g.debug("Sending page view event");var b=a.$("body"),c=k(b);f=c,a.mixpanel.track(e.pageViewEvent,c)},t=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")},u=function(a,b){return a&&a.indexOf(b)>=0},v=function(){var a=document.referrer;return!!(u(a,"google")||u(a,"bing")||u(a,"yahoo"))},w=function(){var a=document.referrer;return!!(u(a,"facebook")||u(a,"twitter")||u(a,"plus.google")||u(a,"linkedin")||u(a,"pinterest")||u(a,"instagram"))},x=function(){var a=document.referrer;return!w()&&!v()&&a},y=function(){return!x()},z=function(){var a=t(document.URL,"utm_medium");return a?a:w()?"social":v()?"seo":x()?"referral":y()?"$direct":void 0},A=function(a){var b=a.split("_");return b.length>1?b[0].toUpperCase()+" "+j(b[1]):j(a)},B=function(){var b=!1;return function(a){var c=new RegExp(["(android|bbd+|meego).+mobile|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|hiptop|","iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|","palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|","vodafone|wap|windows ce|xda|xiin|android|ipad|playbook|silko/i"].join("")),d=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|","an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|","br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|","dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|","ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit","|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|","i230|iac( |-|/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|","kgt( |/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|","m3ga|m50/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|","t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|","ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|","pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|","qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55/|sa(ge|ma|mm|ms|ny|va)|","sc(01|h-|oo|p-)|sdk/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|","sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|","tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)|utst|v400|v750|","veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|","whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i"].join(""));(c.test(a)||d.test(a.substr(0,4)))&&(b=!0)}(navigator.userAgent||navigator.vendor||a.opera),b?"mobile":"desktop"},C=function(){var a,b="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),c="",d={};for(a=0;a<b.length;++a)c=t(document.URL,b[a]),c.length&&(d["Last "+A(b[a])]=c);return d["Last US State"]=t(document.URL,"state"),d["Last Referrer"]=document.referrer,d["Last Entry URL"]=document.URL,d["Last Touch Source"]=z(),d["Last Entry Device"]=B(),d},D=function(){var a={};return a["First US State"]=t(document.URL,"state"),a["First Referrer"]=document.referrer,a["First Entry URL"]=document.URL,a["First Touch Source"]=z(),a["First Entry Device"]=B(),a},E=function(){var b={};d.get(e.cookieFirst)||(b=a.$.extend(b,D()),d.set(e.cookieFirst,!0,365)),g.debug("Obtaining params last"),b=a.$.extend(b,C()),a.mixpanel.people.set(b),a.mixpanel.register(b)},F=function(){g.debug("Starting tracking");try{(!document.referrer||document.referrer.indexOf(h.ownerDomain)<0)&&E(),void 0!==h.sendPageView&&"true"!==h.sendPageView||s(),r()}catch(a){console.error(a)}},G=function(c){if(h={},void 0===a.$)throw new Error("Jquery not load");if(void 0===a.mixpanel)throw new Error("window.Mixpanel not load");var d=0;a.$("body").data("env")&&"production"!==a.$("body").data("env").toLowerCase()&&(d=3),h.ownerDomain=a.$("body").data(e.prefixNameTrackingOwnerDomain)||c.defaultOwnerDomain,h.sendPageView=a.$("body").data(e.sendPageView),g=new b(d),a.mixpanel.set_config({debug:3===d}),F()},H=function(b,c){var d=a.$.extend({},f,c);a.mixpanel.track(b,d)},I=function(b){a.mixpanel.identify(b)},J=function(b,c){a.mixpanel.alias(b,c)},K=function(b){a.mixpanel.people.set(b)};a.trackingWallet={init:G,track:H,extractDataForm:o,getMixpanelCookie:d.getMixpanelCookie,identify:I,alias:J,people:{set:K}}}(window);